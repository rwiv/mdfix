# mdfix

마크다운 파일을 자동으로 정규화하고 정리해주는 도구입니다.

## 사용 방법

마크다운 파일을 `mdfix.pyw`에 드래그 앤 드랍하면, 정규화된 파일이 `파일명_out.md` 형식으로 저장됩니다.

## 주요 기능

### 참조 정규화

- **참조 마커 형식 정규화**: `[숫자]` 형식의 참고문헌 마커를 `[^숫자]` 형식(Markdown 각주)으로 변환합니다.
  - 예: `[1]` → `[^1]`
- **참조 정의 형식 변환**: `[^숫자](URL)` -> `[^숫자]: URL`
  - 예: `[^1](https://example.com)` → `[^1]: https://example.com`
- **미사용 참조 삭제**: 문서에서 참조되지 않는 참고 정의는 자동으로 삭제됩니다.

### 구조 정규화

- **헤더 레벨 정규화**: 헤더의 계층 구조를 일관성 있게 조정합니다.
  - 헤더의 최소 레벨이 3 이상이면, 모든 헤더의 레벨을 낮춰서 최소 레벨이 2가 되도록 합니다.
- **indent 정규화**: 글머리 기호의 들여쓰기를 일관성 있게 조정합니다.
  - 최소 들여쓰기가 2칸이면 모든 글머리의 들여쓰기를 2배로 변환합니다.

### 문자 정규화

- **bullet 정규화**: `*`/`+` -> `-`, `1)` -> `1.`
- **LaTeX 정규화**: `[`/`]` -> `$$`로, `(`/`)` -> `$`
- **수평선 제거**: 마크다운의 수평선(—--, *** 등)을 제거하거나 빈 줄로 대체합니다.
- **특수문자 마커 변환**: 특수문자 마커를 일반 문자로 변환합니다.
  - 예: `## ① hello` → `## 1) hello`
- **탭 문자 정규화**: 모든 탭 문자를 4개의 스페이스로 변환합니다.
- **줄 끝 공백 제거**: 각 줄 끝에 있는 불필요한 공백을 제거합니다.

## 프로젝트 구조

```
mdfix/
├── normalizers/      # 정규화 기능 구현
│   ├── headers/      # 헤더 관련 기능
│   ├── refs/         # 참조 관련 기능
│   ├── latex/        # LaTeX 수식 기능
│   ├── bullets/      # 글머리 기호 기능
│   └── misc/         # 기타 기능
└── runner/           # 파일 처리 및 실행
tests/                # 테스트
docs/                 # 문서화 (sphinx)
```

## 설치 및 개발

```bash
# 개발 환경 설정
uv sync

# 정적 분석 실행
pyright

# 단위 테스트 실행
pytest

# 코드 formatter 실행
black .
```
