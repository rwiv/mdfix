# mdfix

마크다운 파일을 자동으로 정규화하고 정리해주는 도구입니다.

## 사용 방법

마크다운 파일을 `mdfix.pyw`에 드래그 앤 드랍하면, 정규화된 파일이 `파일명_out.md` 형식으로 저장됩니다.

## 주요 기능

### 헤더(Header) 정규화

- **강조 제거**: 헤더에서 **굵게**, *이탤릭*, \_강조_ 같은 강조 표시를 제거합니다.
    - 예: `## **hello**` → `## hello`
- **레벨 정규화**: 헤더의 계층 구조를 일관성 있게 조정합니다.
    - 최소 레벨이 3 이상이면, 모든 헤더의 레벨을 낮춰서 최소 레벨이 2가 되도록 합니다.
- **줄바꿈 추가**: 헤더와 다음 내용 사이에 빈 줄을 추가합니다.
- **번호 마커 변환**: 원형 숫자(①, ②, ③ 등)를 일반 숫자로 변환합니다.
    - 예: `## ① hello` → `## 1) hello`

### 참조(Reference) 정리

- **참조 마커 제거**: 본문에서 `[1]`, `[2]` 같은 참조 표시를 제거합니다.
- **참조 라인 제거**: `[1]`, `[2]`로 시작하는 참조 정의 라인 전체를 제거합니다.

### LaTeX 수식 정규화

- **대괄호 변환**: `[`와 `]`를 `$$`로 변환하여 블록 수식 형식으로 정규화합니다.
- **소괄호 변환**: `(`와 `)`를 `$`로 변환하여 인라인 수식 형식으로 정규화합니다.

### 글머리 기호(Bullet) 정규화

- **들여쓰기 정규화**: 글머리 기호의 들여쓰기를 일관성 있게 조정합니다.
    - 최소 들여쓰기가 2칸이면 모든 글머리의 들여쓰기를 2배로 변환합니다.
- **문자 정규화**: `-`, `*`, `1.`, `1)` 등 다양한 글머리 형식 다음의 공백을 1개로 통일합니다.
- **줄바꿈 추가**: 본문 텍스트 다음에 글머리 기호가 오는 경우, 그 사이에 빈 줄을 추가합니다.

### 기타(Miscellaneous) 정리

- **탭 문자 변환**: 모든 탭 문자를 4개의 스페이스로 변환합니다.
- **줄 끝 공백 제거**: 각 줄 끝에 있는 불필요한 공백을 제거합니다.
- **수평선 제거**: 마크다운의 수평선(—--, *** 등)을 제거하거나 빈 줄로 대체합니다.

## 프로젝트 구조

```
mdfix/
├── normalizers/      # 정규화 기능 구현
│   ├── headers/      # 헤더 관련 기능
│   ├── refs/         # 참조 관련 기능
│   ├── latex/        # LaTeX 수식 기능
│   ├── bullets/      # 글머리 기호 기능
│   └── misc/         # 기타 기능
└── runner/           # 파일 처리 및 실행
tests/                # 테스트
docs/                 # 문서화 (sphinx)
```

## 설치 및 개발

```bash
# 개발 환경 설정
uv sync

# 정적 분석
pyright

# 테스트 실행
pytest

# 코드 스타일 확인 (Black, 줄 길이 125자)
black .
```
